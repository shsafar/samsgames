<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Hashtag Words</title>
<style>
  * { box-sizing: border-box; }

  body {
    margin: 0;
    background: #f3f1ea;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    display: flex;
    justify-content: center;
    padding: 10px 0 20px;
  }

  #game {
    width: min(430px, 90vw);
    max-width: 600px;
    background: #fdfaf4;
    border-radius: 24px;
    padding: 16px;
    box-shadow: 0 16px 40px rgba(0,0,0,0.15);
  }

  /* Responsive sizing for iPad */
  @media (min-width: 768px) {
    #game {
      width: min(600px, 90vw);
      padding: 24px;
    }
  }

  /* Level Selection Screen */
  #levelSelection {
    text-align: center;
    padding: 20px;
  }

  #levelSelection h1 {
    font-size: 32px;
    margin: 20px 0 10px;
    color: #1b304f;
  }

  #levelSelection p {
    font-size: 14px;
    color: #666;
    margin-bottom: 30px;
  }

  .level-btn {
    display: block;
    width: 100%;
    max-width: 300px;
    margin: 12px auto;
    padding: 16px 20px;
    border: none;
    border-radius: 12px;
    font-size: 18px;
    font-weight: 600;
    cursor: pointer;
    transition: transform 0.15s, box-shadow 0.15s;
    -webkit-tap-highlight-color: transparent;
  }

  .level-btn:active {
    transform: scale(0.98);
  }

  .level-btn.easy {
    background: linear-gradient(135deg, #a6e685, #5ea531);
    color: white;
  }

  .level-btn.medium {
    background: linear-gradient(135deg, #ffe58a, #e0b300);
    color: #1b304f;
  }

  .level-btn.hard {
    background: linear-gradient(135deg, #ffb347, #ff6b35);
    color: white;
  }

  /* Game Screen */
  #gameScreen {
    display: none;
  }

  .top-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
    font-size: 14px;
    font-weight: 600;
  }

  .top-left {
    display: flex;
    gap: 8px;
    align-items: center;
  }

  #resetBtn, #nextBtn, #backBtn {
    border: none;
    background: #ece4d3;
    border-radius: 999px;
    padding: 6px 12px;
    font-size: 13px;
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
  }

  .level-label {
    font-size: 13px;
    opacity: 0.8;
  }

  .hashtag-area {
    position: relative;
    width: 260px;
    height: 260px;
    margin: 12px auto 8px;
  }

  .bar {
    position: absolute;
    background: #1b304f;
    border-radius: 10px;
    z-index: 0;
    transform: skewX(-15deg);
  }

  .letter {
    position: absolute;
    width: 34px;
    height: 34px;
    border-radius: 6px;
    border: 2px solid #1b304f;
    background: #ffffff;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 1;
    transition: background 0.15s, border-color 0.15s;
    -webkit-tap-highlight-color: transparent;
  }

  .letter-inner {
    font-size: 19px;
    font-weight: 700;
    color: #1b304f;
  }

  .letter.empty .letter-inner { color: transparent; }

  .letter.fixed {
    background: #1b304f;
  }
  .letter.fixed .letter-inner { color: #fdfaf4; }

  .letter.filler {
    background: #6b7280;
    border-color: #4b5563;
    pointer-events: none;
  }
  .letter.filler .letter-inner { color: transparent; }

  .letter.selected:not(.fixed):not(.filler) {
    background: #ffb347;
    border-color: #ff9a2e;
  }

  .letter.wrong:not(.fixed):not(.filler) {
    background: #ffe58a;
    border-color: #e0b300;
  }

  .letter.correct:not(.fixed):not(.filler) {
    background: #a6e685;
    border-color: #5ea531;
  }

  #heat {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    transform: translate(-50%, -50%);
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.25);
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: 800;
    font-size: 9px;
    color: #111827;
    z-index: 2;
  }

  .heat-cold {
    background: radial-gradient(circle, #e0f2fe, #2563eb);
    color: #0f172a;
  }
  .heat-warm {
    background: radial-gradient(circle, #fef9c3, #eab308);
    color: #1f2933;
  }
  .heat-hot  {
    background: radial-gradient(circle, #ffedd5, #fb923c);
    color: #1f2933;
  }
  .heat-max  {
    background: radial-gradient(circle, #fee2e2, #ef4444);
    color: #111827;
  }

  .info-btn {
    position: absolute;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    border: none;
    background: #f7e2b5;
    color: #855100;
    font-size: 13px;
    font-weight: 700;
    cursor: pointer;
    box-shadow: 0 1px 3px rgba(0,0,0,0.25);
    z-index: 3;
    -webkit-tap-highlight-color: transparent;
  }

  .info-btn.disabled {
    background: #9ca3af;
    color: #4b5563;
    cursor: not-allowed;
  }

  .keyboard {
    display: grid;
    grid-template-columns: repeat(10, 1fr);
    gap: 4px;
    margin-top: 24px;
  }

  .key {
    border: none;
    border-radius: 8px;
    background: #e7ddcd;
    font-size: 14px;
    padding: 8px 0;
    cursor: pointer;
    font-weight: 600;
    -webkit-tap-highlight-color: transparent;
  }

  #status, #hintText {
    margin-top: 6px;
    text-align: center;
    font-size: 13px;
    min-height: 18px;
  }
  #status.success { color: #1aa36f; font-weight: 600; }
  #status.fail { color: #d43f3a; font-weight: 600; }
  #hintText { color: #7a5a1a; min-height: 30px; }

  .bottom-bar {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-top: 6px;
    font-size: 12px;
    opacity: 0.7;
  }

  #splashScreen {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 300px;
  }

  .splash-icon {
    font-size: 72px;
    margin-bottom: 20px;
    animation: pulse 2s ease-in-out infinite;
  }

  @keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
  }

  .splash-title {
    font-size: 32px;
    font-weight: 700;
    color: #1b304f;
    margin-bottom: 10px;
  }

  .splash-subtitle {
    font-size: 14px;
    color: #666;
  }
</style>
</head>
<body>

<div id="game">
  <!-- Splash Screen -->
  <div id="splashScreen">
    <div class="splash-icon">#Ô∏è‚É£</div>
    <div class="splash-title">Hashtag Words</div>
    <div class="splash-subtitle">Loading...</div>
  </div>

  <!-- Level Selection Screen -->
  <div id="levelSelection" style="display:none;">
    <h1>#Ô∏è‚É£ Hashtag Words</h1>
    <p style="display: none;">Choose your difficulty level</p>

    <button class="level-btn easy" onclick="selectLevel(1)">
      Level 1 - Easy<br>
      <small style="font-size: 13px; opacity: 0.9;">5-letter words ¬∑ 5 hints ¬∑ 60s</small>
    </button>

    <button class="level-btn medium" onclick="selectLevel(2)">
      Level 2 - Medium<br>
      <small style="font-size: 13px; opacity: 0.9;">5-letter words ¬∑ 4 hints ¬∑ 60s</small>
    </button>

    <button class="level-btn hard" onclick="selectLevel(3)">
      Level 3 - Hard<br>
      <small style="font-size: 13px; opacity: 0.9;">4-5 letter mix ¬∑ 3 hints ¬∑ 45s</small>
    </button>
  </div>

  <!-- Game Screen -->
  <div id="gameScreen">
    <div class="top-bar">
      <div class="top-left">
        <button id="backBtn" style="display: none;">‚Üê Back</button>
        <button id="resetBtn" style="display: none;">‚Ü∫ Reset</button>
        <span class="level-label">Level <span id="levelNum">1</span><span id="puzzleLabel" style="display: none;"> ¬∑ 1 / 10</span></span>
      </div>
      <div>‚è± <span id="timer">60</span>s ¬∑ üí° <span id="hints">5</span></div>
    </div>

    <div class="hashtag-area" id="hashtagArea">
      <div id="heat" class="heat-cold">COLD</div>
      <button id="infoTop" class="info-btn">i</button>
      <button id="infoBottom" class="info-btn">i</button>
      <button id="infoLeft" class="info-btn">i</button>
      <button id="infoRight" class="info-btn">i</button>
    </div>

    <button id="nextBtn" style="display: none;">Next Puzzle ‚ñ∂</button>

    <div class="keyboard" id="keyboard"></div>
    <div id="status"></div>
    <div id="hintText"></div>

    <div class="bottom-bar" id="bottomText" style="display: none;">
      Lots of letters shown, blanks randomized every puzzle.
    </div>
  </div>
</div>

<script>
  // ========== MULBERRY32 PRNG ==========
  function mulberry32(seed) {
    return function() {
      let t = seed += 0x6D2B79F5;
      t = Math.imul(t ^ t >>> 15, t | 1);
      t ^= t + Math.imul(t ^ t >>> 7, t | 61);
      return ((t ^ t >>> 14) >>> 0) / 4294967296;
    };
  }

  // ========== GAME STATE ==========
  const STEP        = 50;
  const CELL_SIZE   = 34;
  const HBAR_HEIGHT = 40;
  const VBAR_WIDTH  = 40;
  const CENTER      = 130;
  const BASE_X      = CENTER - 2*STEP - CELL_SIZE/2;
  const BASE_Y      = CENTER - 2*STEP - CELL_SIZE/2;

  let currentLevel = 0;
  let currentPuzzleIndex = 0;
  let currentPuzzle = null;
  let words = [];
  let seededRandom = Math.random;
  let seed = null;

  const hashtagArea = document.getElementById("hashtagArea");
  const keyboardEl  = document.getElementById("keyboard");
  const heatEl      = document.getElementById("heat");
  const timerEl     = document.getElementById("timer");
  const hintsEl     = document.getElementById("hints");
  const statusEl    = document.getElementById("status");
  const hintTextEl  = document.getElementById("hintText");
  const resetBtn    = document.getElementById("resetBtn");
  const nextBtn     = document.getElementById("nextBtn");
  const backBtn     = document.getElementById("backBtn");
  const puzzleLabel = document.getElementById("puzzleLabel");
  const levelNum    = document.getElementById("levelNum");
  const bottomText  = document.getElementById("bottomText");

  const infoTop     = document.getElementById("infoTop");
  const infoBottom  = document.getElementById("infoBottom");
  const infoLeft    = document.getElementById("infoLeft");
  const infoRight   = document.getElementById("infoRight");

  let cells = [];
  let userLetters = [];
  let selectedIndex = null;
  let hintsLeft = 5;
  let timeLeft = 60;
  let timer = null;
  let solved = false;

  // ========== LEVEL 1 PUZZLES (EASY) ==========
  const PUZZLES_L1 = [
    {
      id: "L1-1",
      top:    { answer: "BASIC", hint: "Simple and not complicated." },
      bottom: { answer: "LEVEL", hint: "A flat surface or stage of progress." },
      left:   { answer: "WATER", hint: "Clear liquid essential for life." },
      right:  { answer: "RIVER", hint: "Large natural flowing stream." }
    },
    {
      id: "L1-2",
      top:    { answer: "GREET", hint: "To welcome someone politely." },
      bottom: { answer: "PARTY", hint: "Fun gathering with friends." },
      left:   { answer: "DREAM", hint: "Imagery in your mind while sleeping." },
      right:  { answer: "PETTY", hint: "Focused on unimportant details." }
    },
    {
      id: "L1-3",
      top:    { answer: "PILOT", hint: "Person who flies an airplane." },
      bottom: { answer: "PESTO", hint: "Green sauce made from basil and oil." },
      left:   { answer: "RIVER", hint: "Natural flowing stream of water." },
      right:  { answer: "ROUTE", hint: "A path or direction to follow." }
    },
    {
      id: "L1-4",
      top:    { answer: "COCOA", hint: "Powder used to make hot chocolate." },
      bottom: { answer: "STEEL", hint: "Very strong metal made from iron." },
      left:   { answer: "MOUTH", hint: "Part of the face used for eating and talking." },
      right:  { answer: "BONES", hint: "Hard pieces that form the skeleton." }
    },
    {
      id: "L1-5",
      top:    { answer: "DREAM", hint: "Something you hope will happen." },
      bottom: { answer: "EDGES", hint: "Outer borders of objects." },
      left:   { answer: "GRADE", hint: "Score you get on school work." },
      right:  { answer: "PAPER", hint: "Thin material used for writing." }
    },
    {
      id: "L1-6",
      top:    { answer: "MAKER", hint: "Someone who creates or produces something." },
      bottom: { answer: "PAPER", hint: "Material used for notes and books." },
      left:   { answer: "CARAT", hint: "Unit of weight for gemstones." },
      right:  { answer: "LEVEL", hint: "A stage, rank, or flat position." }
    },
    {
      id: "L1-7",
      top:    { answer: "TIMES", hint: "Moments, or the multiplication sign." },
      bottom: { answer: "IDEAS", hint: "Thoughts or mental concepts." },
      left:   { answer: "MINDS", hint: "Thinking parts of people." },
      right:  { answer: "METAL", hint: "Hard, shiny material like iron." }
    },
    {
      id: "L1-8",
      top:    { answer: "MAPLE", hint: "Tree whose leaf is on the Canadian flag." },
      bottom: { answer: "STORM", hint: "Violent weather with wind and rain." },
      left:   { answer: "EARTH", hint: "The planet we live on." },
      right:  { answer: "ALARM", hint: "Device that warns with a loud sound." }
    },
    {
      id: "L1-9",
      top:    { answer: "WORLD", hint: "The planet and everyone on it." },
      bottom: { answer: "RIVER", hint: "Large natural stream of water." },
      left:   { answer: "LOGIC", hint: "Clear and sensible reasoning." },
      right:  { answer: "OLDER", hint: "More advanced in age." }
    },
    {
      id: "L1-10",
      top:    { answer: "GRAPE", hint: "Small round fruit used to make wine." },
      bottom: { answer: "SCENE", hint: "A view, or part of a movie or play." },
      left:   { answer: "TRACK", hint: "Path for running or for trains." },
      right:  { answer: "SPINE", hint: "Backbone running down your back." }
    },
    {
      id: "L1-11",
      top:    { answer: "LUNCH", hint: "Meal eaten in the middle of the day." },
      bottom: { answer: "BONUS", hint: "Extra reward or payment." },
      left:   { answer: "DANCE", hint: "Move your body to music." },
      right:  { answer: "PIANO", hint: "Large keyboard instrument." }
    },
    {
      id: "L1-12",
      top:    { answer: "BEACH", hint: "Sandy shore by the ocean." },
      bottom: { answer: "LEMON", hint: "Yellow citrus fruit." },
      left:   { answer: "REACH", hint: "Stretch out to touch something." },
      right:  { answer: "DEMON", hint: "Evil spirit in stories." }
    },
    {
      id: "L1-13",
      top:    { answer: "CREAM", hint: "Thick part of milk used in coffee." },
      bottom: { answer: "ENEMY", hint: "Someone who opposes you." },
      left:   { answer: "ARENA", hint: "Large area for sports or concerts." },
      right:  { answer: "MAYBE", hint: "Perhaps, possibly." }
    },
    {
      id: "L1-14",
      top:    { answer: "BREAD", hint: "Baked food made from flour." },
      bottom: { answer: "TIMER", hint: "Device that counts down time." },
      left:   { answer: "TREAT", hint: "Something special to enjoy." },
      right:  { answer: "LIVER", hint: "Organ that filters blood." }
    },
    {
      id: "L1-15",
      top:    { answer: "SMILE", hint: "Happy expression on your face." },
      bottom: { answer: "NOISE", hint: "Sound, especially loud or unpleasant." },
      left:   { answer: "CLIMB", hint: "Go up using hands and feet." },
      right:  { answer: "VOICE", hint: "Sound you make when speaking." }
    },
    {
      id: "L1-16",
      top:    { answer: "CROWN", hint: "Royal headwear worn by kings." },
      bottom: { answer: "OCEAN", hint: "Large body of salt water." },
      left:   { answer: "ARROW", hint: "Pointed stick shot from a bow." },
      right:  { answer: "ORGAN", hint: "Body part like heart or lungs." }
    },
    {
      id: "L1-17",
      top:    { answer: "FROST", hint: "Icy coating on cold surfaces." },
      bottom: { answer: "TREND", hint: "Popular style or direction." },
      left:   { answer: "RADIO", hint: "Device for listening to broadcasts." },
      right:  { answer: "BLEND", hint: "Mix things together smoothly." }
    },
    {
      id: "L1-18",
      top:    { answer: "FLOUR", hint: "Powder made from grain for baking." },
      bottom: { answer: "FIELD", hint: "Open area of land or grass." },
      left:   { answer: "TOOLS", hint: "Items used to build or fix things." },
      right:  { answer: "YIELD", hint: "Produce or give way." }
    },
    {
      id: "L1-19",
      top:    { answer: "PLANT", hint: "Living thing that grows in soil." },
      bottom: { answer: "STONE", hint: "Hard solid piece of rock." },
      left:   { answer: "ALARM", hint: "Warning signal or device." },
      right:  { answer: "PHONE", hint: "Device for making calls." }
    },
    {
      id: "L1-20",
      top:    { answer: "GLOVE", hint: "Hand covering worn for warmth." },
      bottom: { answer: "TRADE", hint: "Exchange goods or services." },
      left:   { answer: "FLOAT", hint: "Stay on top of water." },
      right:  { answer: "SHADE", hint: "Area protected from sunlight." }
    },
    {
      id: "L1-21",
      top:    { answer: "CHAIR", hint: "Furniture for sitting." },
      bottom: { answer: "SHAPE", hint: "Form or outline of something." },
      left:   { answer: "CHEAP", hint: "Low in price, not expensive." },
      right:  { answer: "GRAPE", hint: "Small round fruit on vines." }
    },
    {
      id: "L1-22",
      top:    { answer: "BRAKE", hint: "Device to slow or stop a vehicle." },
      bottom: { answer: "THANK", hint: "Express gratitude to someone." },
      left:   { answer: "TRACK", hint: "Path or route to follow." },
      right:  { answer: "BLANK", hint: "Empty space with nothing written." }
    },
    {
      id: "L1-23",
      top:    { answer: "FRAME", hint: "Border around a picture." },
      bottom: { answer: "PEACE", hint: "State of calm without war." },
      left:   { answer: "DRAMA", hint: "Serious play or exciting events." },
      right:  { answer: "PLACE", hint: "Location or position." }
    },
    {
      id: "L1-24",
      top:    { answer: "PRINT", hint: "Mark made by pressing ink on paper." },
      bottom: { answer: "TRAIL", hint: "Path through nature or evidence left behind." },
      left:   { answer: "BRAIN", hint: "Organ in your head for thinking." },
      right:  { answer: "EMAIL", hint: "Electronic message sent online." }
    },
    {
      id: "L1-25",
      top:    { answer: "GIANT", hint: "Extremely large creature or person." },
      bottom: { answer: "LIGHT", hint: "Brightness that lets you see." },
      left:   { answer: "PAINT", hint: "Colored liquid for decorating." },
      right:  { answer: "RIGHT", hint: "Correct or opposite of left." }
    },
    {
      id: "L1-26",
      top:    { answer: "SHOCK", hint: "Sudden surprise or electric jolt." },
      bottom: { answer: "CATCH", hint: "Grab something moving through air." },
      left:   { answer: "WITCH", hint: "Person with magical powers in stories." },
      right:  { answer: "MATCH", hint: "Two things that go together well." }
    },
    {
      id: "L1-27",
      top:    { answer: "GHOST", hint: "Spirit of a dead person." },
      bottom: { answer: "YOUTH", hint: "Time of being young." },
      left:   { answer: "SOUTH", hint: "Direction opposite of north." },
      right:  { answer: "EARTH", hint: "Planet we live on." }
    },
    {
      id: "L1-28",
      top:    { answer: "SHARP", hint: "Having a fine cutting edge." },
      bottom: { answer: "CHEAP", hint: "Costing little money." },
      left:   { answer: "GRAPH", hint: "Visual chart showing data." },
      right:  { answer: "WHEAT", hint: "Grain used to make bread." }
    },
    {
      id: "L1-29",
      top:    { answer: "TRUCK", hint: "Large vehicle for carrying cargo." },
      bottom: { answer: "MUSIC", hint: "Sounds arranged in a pleasing way." },
      left:   { answer: "JUDGE", hint: "Person who decides court cases." },
      right:  { answer: "PANIC", hint: "Sudden feeling of fear." }
    },
    {
      id: "L1-30",
      top:    { answer: "PROUD", hint: "Feeling pleased about an achievement." },
      bottom: { answer: "SWORD", hint: "Weapon with a long blade." },
      left:   { answer: "THROW", hint: "Toss something through the air." },
      right:  { answer: "CROWD", hint: "Large group of people." }
    },
    {
      id: "L1-31",
      top:    { answer: "KNIFE", hint: "Tool with a sharp blade for cutting." },
      bottom: { answer: "PHONE", hint: "Device for calling people." },
      left:   { answer: "GRIEF", hint: "Deep sadness from loss." },
      right:  { answer: "SHORE", hint: "Land along the edge of water." }
    },
    {
      id: "L1-32",
      top:    { answer: "PLAZA", hint: "Open public square in a city." },
      bottom: { answer: "ALBUM", hint: "Collection of songs or photos." },
      left:   { answer: "SMALL", hint: "Little in size." },
      right:  { answer: "THUMB", hint: "Thickest finger on your hand." }
    },
    {
      id: "L1-33",
      top:    { answer: "TIGER", hint: "Large striped wild cat." },
      bottom: { answer: "RELAX", hint: "Rest and become less tense." },
      left:   { answer: "SUGAR", hint: "Sweet substance used in cooking." },
      right:  { answer: "SOLAR", hint: "Related to the sun." }
    },
    {
      id: "L1-34",
      top:    { answer: "CRISP", hint: "Firm and crunchy texture." },
      bottom: { answer: "DRAMA", hint: "Exciting or emotional events." },
      left:   { answer: "TRICK", hint: "Clever act to deceive or entertain." },
      right:  { answer: "COMMA", hint: "Punctuation mark for pausing." }
    },
    {
      id: "L1-35",
      top:    { answer: "CLOUD", hint: "White fluffy mass in the sky." },
      bottom: { answer: "CORAL", hint: "Hard substance formed by sea creatures." },
      left:   { answer: "EQUAL", hint: "Same in amount or value." },
      right:  { answer: "LOCAL", hint: "Nearby or from this area." }
    },
    {
      id: "L1-36",
      top:    { answer: "TOPIC", hint: "Subject being discussed." },
      bottom: { answer: "ALBUM", hint: "Collection of music or photos." },
      left:   { answer: "STEAM", hint: "Hot vapor from boiling water." },
      right:  { answer: "CLIMB", hint: "Go up using hands and feet." }
    },
    {
      id: "L1-37",
      top:    { answer: "BRICK", hint: "Block used for building walls." },
      bottom: { answer: "STUCK", hint: "Unable to move or continue." },
      left:   { answer: "THICK", hint: "Wide from one side to the other." },
      right:  { answer: "PLUCK", hint: "Pull something quickly." }
    },
    {
      id: "L1-38",
      top:    { answer: "FLOUR", hint: "Powder for making bread and cakes." },
      bottom: { answer: "BEACH", hint: "Sandy area by the sea." },
      left:   { answer: "ABOUT", hint: "Concerning or approximately." },
      right:  { answer: "TEACH", hint: "Give lessons or instructions." }
    },
    {
      id: "L1-39",
      top:    { answer: "SPORT", hint: "Physical game or competition." },
      bottom: { answer: "CHART", hint: "Visual display of information." },
      left:   { answer: "ADOPT", hint: "Take in and raise as your own." },
      right:  { answer: "HEART", hint: "Organ that pumps blood." }
    },
    {
      id: "L1-40",
      top:    { answer: "ALARM", hint: "Warning sound or device." },
      bottom: { answer: "LEMON", hint: "Sour yellow citrus fruit." },
      left:   { answer: "BEACH", hint: "Sandy shore by water." },
      right:  { answer: "DEMON", hint: "Evil supernatural being." }
    },
    {
      id: "L1-41",
      top:    { answer: "WHALE", hint: "Largest mammal in the ocean." },
      bottom: { answer: "CHAIR", hint: "Seat with a back for one person." },
      left:   { answer: "FRESH", hint: "New or recently made." },
      right:  { answer: "THEIR", hint: "Belonging to them." }
    },
    {
      id: "L1-42",
      top:    { answer: "STUDY", hint: "Learn by reading and practice." },
      bottom: { answer: "EMPTY", hint: "Containing nothing." },
      left:   { answer: "CANDY", hint: "Sweet treat or confection." },
      right:  { answer: "PARTY", hint: "Social celebration with guests." }
    },
    {
      id: "L1-43",
      top:    { answer: "DOZEN", hint: "Group of twelve items." },
      bottom: { answer: "GREEN", hint: "Color of grass and leaves." },
      left:   { answer: "GIVEN", hint: "Already specified or granted." },
      right:  { answer: "QUEEN", hint: "Female ruler of a kingdom." }
    },
    {
      id: "L1-44",
      top:    { answer: "BLAME", hint: "Say someone is responsible for wrong." },
      bottom: { answer: "VALUE", hint: "Worth or importance of something." },
      left:   { answer: "FLAME", hint: "Hot glowing part of fire." },
      right:  { answer: "SALVE", hint: "Healing ointment for wounds." }
    },
    {
      id: "L1-45",
      top:    { answer: "FLASH", hint: "Sudden brief burst of light." },
      bottom: { answer: "METAL", hint: "Hard shiny material like iron." },
      left:   { answer: "CLASH", hint: "Conflict or loud collision." },
      right:  { answer: "PETAL", hint: "Colored part of a flower." }
    },
    {
      id: "L1-46",
      top:    { answer: "CRIME", hint: "Illegal activity punished by law." },
      bottom: { answer: "MAPLE", hint: "Tree with distinctive leaf shape." },
      left:   { answer: "ARGUE", hint: "Disagree in words." },
      right:  { answer: "APPLE", hint: "Round fruit often red or green." }
    },
    {
      id: "L1-47",
      top:    { answer: "BLANK", hint: "Empty with nothing on it." },
      bottom: { answer: "BREAK", hint: "Separate into pieces or pause." },
      left:   { answer: "THANK", hint: "Show gratitude to someone." },
      right:  { answer: "STEAK", hint: "Thick slice of meat." }
    },
    {
      id: "L1-48",
      top:    { answer: "SOLAR", hint: "Relating to the sun." },
      bottom: { answer: "HUMAN", hint: "Person, member of our species." },
      left:   { answer: "COLOR", hint: "Visual property like red or blue." },
      right:  { answer: "WOMAN", hint: "Adult female person." }
    },
    {
      id: "L1-49",
      top:    { answer: "WASTE", hint: "Use carelessly or garbage." },
      bottom: { answer: "EXTRA", hint: "More than needed or usual." },
      left:   { answer: "BEAST", hint: "Large wild animal." },
      right:  { answer: "ULTRA", hint: "Beyond or extremely." }
    },
    {
      id: "L1-50",
      top:    { answer: "FRUIT", hint: "Sweet plant product with seeds." },
      bottom: { answer: "MATCH", hint: "Two things that go well together." },
      left:   { answer: "ADMIT", hint: "Confess or allow entry." },
      right:  { answer: "WATCH", hint: "Timepiece worn on wrist." }
    },
    {
      id: "L1-51",
      top:    { answer: "ORGAN", hint: "Body part with specific function." },
      bottom: { answer: "INPUT", hint: "Data entered into system." },
      left:   { answer: "URBAN", hint: "Related to cities." },
      right:  { answer: "KAPUT", hint: "Broken or not working." }
    },
    {
      id: "L1-52",
      top:    { answer: "SPICE", hint: "Flavoring from plants for food." },
      bottom: { answer: "WROTE", hint: "Past tense of write." },
      left:   { answer: "SPACE", hint: "Empty area or outer cosmos." },
      right:  { answer: "QUOTE", hint: "Exact words from source." }
    },
    {
      id: "L1-53",
      top:    { answer: "GLOBE", hint: "Round model of Earth." },
      bottom: { answer: "SLIDE", hint: "Move smoothly or playground equipment." },
      left:   { answer: "TRIBE", hint: "Group sharing culture and customs." },
      right:  { answer: "GLIDE", hint: "Move smoothly and effortlessly." }
    },
    {
      id: "L1-54",
      top:    { answer: "SCALE", hint: "Device for weighing or size ratio." },
      bottom: { answer: "WRECK", hint: "Destroyed vehicle or ship." },
      left:   { answer: "ANKLE", hint: "Joint connecting foot to leg." },
      right:  { answer: "CHECK", hint: "Examine or payment slip." }
    },
    {
      id: "L1-55",
      top:    { answer: "PIXEL", hint: "Tiny dot on screen display." },
      bottom: { answer: "LABEL", hint: "Tag identifying contents." },
      left:   { answer: "CIVIL", hint: "Polite or relating to citizens." },
      right:  { answer: "REBEL", hint: "Person who resists authority." }
    },
    {
      id: "L1-56",
      top:    { answer: "MEDAL", hint: "Award for achievement or bravery." },
      bottom: { answer: "LEGAL", hint: "Allowed by law." },
      left:   { answer: "IDEAL", hint: "Perfect or best possible." },
      right:  { answer: "REGAL", hint: "Royal or magnificent." }
    },
    {
      id: "L1-57",
      top:    { answer: "MOTOR", hint: "Machine that produces motion." },
      bottom: { answer: "HUMOR", hint: "Quality of being funny." },
      left:   { answer: "MINOR", hint: "Small in importance or age." },
      right:  { answer: "TUMOR", hint: "Abnormal growth in body." }
    },
    {
      id: "L1-58",
      top:    { answer: "WHEAT", hint: "Grain crop for making flour." },
      bottom: { answer: "PEARL", hint: "Smooth gem from oyster." },
      left:   { answer: "CHEAT", hint: "Act dishonestly to win." },
      right:  { answer: "STEAL", hint: "Take without permission." }
    },
    {
      id: "L1-59",
      top:    { answer: "MELON", hint: "Large sweet juicy fruit." },
      bottom: { answer: "CREAM", hint: "Thick dairy product." },
      left:   { answer: "BELOW", hint: "At a lower level than." },
      right:  { answer: "DREAM", hint: "Images in sleep or aspiration." }
    },
    {
      id: "L1-60",
      top:    { answer: "WRECK", hint: "Badly damaged ship or vehicle." },
      bottom: { answer: "PILOT", hint: "Person who flies aircraft." },
      left:   { answer: "RIVAL", hint: "Competitor or opponent." },
      right:  { answer: "ORBIT", hint: "Path around celestial body." }
    }
  ];

  // ========== LEVEL 2 PUZZLES (MEDIUM) ==========
  const PUZZLES_L2 = [
    {
      id: "L2-1",
      top:    { answer: "BASIC", hint: "Simple, not advanced." },
      bottom: { answer: "LEVEL", hint: "Flat, or a stage of progress." },
      left:   { answer: "WATER", hint: "Clear liquid essential for life." },
      right:  { answer: "RIVER", hint: "Large natural flowing stream." }
    },
    {
      id: "L2-2",
      top:    { answer: "GREET", hint: "Welcome someone with words or a smile." },
      bottom: { answer: "PARTY", hint: "Social gathering with music and fun." },
      left:   { answer: "DREAM", hint: "Picture or story in your mind while asleep." },
      right:  { answer: "PETTY", hint: "Overly focused on small, unimportant things." }
    },
    {
      id: "L2-3",
      top:    { answer: "PILOT", hint: "Person who flies an aircraft." },
      bottom: { answer: "PESTO", hint: "Green Italian sauce made with basil." },
      left:   { answer: "RIVER", hint: "Natural flowing waterway." },
      right:  { answer: "ROUTE", hint: "Planned path from one place to another." }
    },
    {
      id: "L2-4",
      top:    { answer: "COCOA", hint: "Powder used to make hot chocolate." },
      bottom: { answer: "STEEL", hint: "Hard, strong metal made from iron." },
      left:   { answer: "MOUTH", hint: "Part of the face used for eating and talking." },
      right:  { answer: "BONES", hint: "Hard parts that form the skeleton." }
    },
    {
      id: "L2-5",
      top:    { answer: "DREAM", hint: "Something you hope will happen someday." },
      bottom: { answer: "EDGES", hint: "Outer borders or sides." },
      left:   { answer: "GRADE", hint: "Score or mark on school work." },
      right:  { answer: "PAPER", hint: "Thin sheet used for writing and printing." }
    },
    {
      id: "L2-6",
      top:    { answer: "MAKER", hint: "Person who creates or builds something." },
      bottom: { answer: "PAPER", hint: "Material used for books and notes." },
      left:   { answer: "CARAT", hint: "Unit of weight for diamonds." },
      right:  { answer: "LEVEL", hint: "Flat state or a rank." }
    },
    {
      id: "L2-7",
      top:    { answer: "TIMES", hint: "Moments, or multiplication symbol." },
      bottom: { answer: "IDEAS", hint: "Thoughts, concepts, mental plans." },
      left:   { answer: "MINDS", hint: "Thinking parts of people." },
      right:  { answer: "METAL", hint: "Hard, shiny material like iron or gold." }
    },
    {
      id: "L2-8",
      top:    { answer: "MAPLE", hint: "Tree whose leaf is on Canada's flag." },
      bottom: { answer: "STORM", hint: "Strong wind with heavy rain or thunder." },
      left:   { answer: "EARTH", hint: "The planet we live on." },
      right:  { answer: "ALARM", hint: "Device that warns you with a sound." }
    },
    {
      id: "L2-9",
      top:    { answer: "WORLD", hint: "The Earth and everyone on it." },
      bottom: { answer: "RIVER", hint: "Wide natural stream of water." },
      left:   { answer: "LOGIC", hint: "Clear, sensible way of thinking." },
      right:  { answer: "OLDER", hint: "More advanced in age." }
    },
    {
      id: "L2-10",
      top:    { answer: "GRAPE", hint: "Small round fruit; can be made into wine." },
      bottom: { answer: "SCENE", hint: "View, or part of a play or movie." },
      left:   { answer: "TRACK", hint: "Path for racing or trains." },
      right:  { answer: "SPINE", hint: "Backbone down the center of your back." }
    },
    {
      id: "L2-11",
      top:    { answer: "LUNCH", hint: "Midday meal between breakfast and dinner." },
      bottom: { answer: "BONUS", hint: "Extra reward beyond usual payment." },
      left:   { answer: "DANCE", hint: "Move rhythmically to music." },
      right:  { answer: "PIANO", hint: "Musical instrument with black and white keys." }
    },
    {
      id: "L2-12",
      top:    { answer: "BEACH", hint: "Sandy shoreline where ocean meets land." },
      bottom: { answer: "LEMON", hint: "Sour yellow citrus often used with tea." },
      left:   { answer: "REACH", hint: "Extend your arm to touch something." },
      right:  { answer: "DEMON", hint: "Evil supernatural creature in mythology." }
    },
    {
      id: "L2-13",
      top:    { answer: "CREAM", hint: "Thick fatty part of milk, or light yellow color." },
      bottom: { answer: "ENEMY", hint: "Person who actively opposes or attacks you." },
      left:   { answer: "ARENA", hint: "Large venue for sports or entertainment." },
      right:  { answer: "MAYBE", hint: "Possibly, perhaps, not certain." }
    },
    {
      id: "L2-14",
      top:    { answer: "BREAD", hint: "Staple food made by baking dough." },
      bottom: { answer: "TIMER", hint: "Device that measures elapsed time." },
      left:   { answer: "TREAT", hint: "Special reward or give medical care." },
      right:  { answer: "LIVER", hint: "Large organ that detoxifies blood." }
    },
    {
      id: "L2-15",
      top:    { answer: "SMILE", hint: "Facial expression showing happiness or amusement." },
      bottom: { answer: "NOISE", hint: "Unwanted or unpleasant sound." },
      left:   { answer: "CLIMB", hint: "Ascend using hands and feet." },
      right:  { answer: "VOICE", hint: "Sound produced by speaking or singing." }
    },
    {
      id: "L2-16",
      top:    { answer: "CROWN", hint: "Ornamental headpiece worn by royalty." },
      bottom: { answer: "OCEAN", hint: "Vast body of salt water covering Earth." },
      left:   { answer: "ARROW", hint: "Projectile shot from a bow." },
      right:  { answer: "ORGAN", hint: "Specialized body part with specific function." }
    },
    {
      id: "L2-17",
      top:    { answer: "FROST", hint: "Ice crystals forming on cold surfaces." },
      bottom: { answer: "TREND", hint: "General direction of change or popular style." },
      left:   { answer: "RADIO", hint: "Device receiving electromagnetic broadcasts." },
      right:  { answer: "BLEND", hint: "Mix substances together smoothly." }
    },
    {
      id: "L2-18",
      top:    { answer: "FLOUR", hint: "Fine powder ground from grain for baking." },
      bottom: { answer: "FIELD", hint: "Open land area, often for crops or sports." },
      left:   { answer: "TOOLS", hint: "Implements used for construction or repair." },
      right:  { answer: "YIELD", hint: "Produce results or surrender." }
    },
    {
      id: "L2-19",
      top:    { answer: "PLANT", hint: "Living organism that photosynthesizes." },
      bottom: { answer: "STONE", hint: "Small piece of rock or hard mineral." },
      left:   { answer: "ALARM", hint: "Warning device triggered by danger." },
      right:  { answer: "PHONE", hint: "Electronic device for voice communication." }
    },
    {
      id: "L2-20",
      top:    { answer: "GLOVE", hint: "Protective covering for the hand." },
      bottom: { answer: "TRADE", hint: "Exchange of goods, services, or professions." },
      left:   { answer: "FLOAT", hint: "Rest on liquid surface without sinking." },
      right:  { answer: "SHADE", hint: "Area protected from direct sunlight." }
    },
    {
      id: "L2-21",
      top:    { answer: "CHAIR", hint: "Seat with back support for one person." },
      bottom: { answer: "SHAPE", hint: "External form or contour of object." },
      left:   { answer: "CHEAP", hint: "Inexpensive or of poor quality." },
      right:  { answer: "GRAPE", hint: "Small berry growing in clusters on vines." }
    },
    {
      id: "L2-22",
      top:    { answer: "BRAKE", hint: "Device slowing or stopping vehicle motion." },
      bottom: { answer: "THANK", hint: "Express gratitude or appreciation." },
      left:   { answer: "TRACK", hint: "Prepared path or follow trail." },
      right:  { answer: "BLANK", hint: "Empty space without marks or writing." }
    },
    {
      id: "L2-23",
      top:    { answer: "FRAME", hint: "Structure supporting or surrounding something." },
      bottom: { answer: "PEACE", hint: "Freedom from war or mental tranquility." },
      left:   { answer: "DRAMA", hint: "Theater genre or exciting situation." },
      right:  { answer: "PLACE", hint: "Particular location or position." }
    },
    {
      id: "L2-24",
      top:    { answer: "PRINT", hint: "Produce text on paper or visible mark." },
      bottom: { answer: "TRAIL", hint: "Path through wilderness or evidence left." },
      left:   { answer: "BRAIN", hint: "Complex organ controlling thought and body." },
      right:  { answer: "EMAIL", hint: "Digital message sent via internet." }
    },
    {
      id: "L2-25",
      top:    { answer: "GIANT", hint: "Enormous person or thing of great size." },
      bottom: { answer: "LIGHT", hint: "Electromagnetic radiation enabling vision." },
      left:   { answer: "PAINT", hint: "Colored liquid for decorating surfaces." },
      right:  { answer: "RIGHT", hint: "Morally correct or opposite of left." }
    },
    {
      id: "L2-26",
      top:    { answer: "SHOCK", hint: "Sudden surprising event or electrical discharge." },
      bottom: { answer: "CATCH", hint: "Intercept and hold moving object." },
      left:   { answer: "WITCH", hint: "Magical practitioner in folklore." },
      right:  { answer: "MATCH", hint: "Competition or items that correspond." }
    },
    {
      id: "L2-27",
      top:    { answer: "GHOST", hint: "Supernatural apparition of deceased person." },
      bottom: { answer: "YOUTH", hint: "Period between childhood and adulthood." },
      left:   { answer: "SOUTH", hint: "Cardinal direction toward Earth's bottom pole." },
      right:  { answer: "EARTH", hint: "Third planet from the Sun." }
    },
    {
      id: "L2-28",
      top:    { answer: "SHARP", hint: "Having fine edge capable of cutting." },
      bottom: { answer: "CHEAP", hint: "Available at low cost or inferior." },
      left:   { answer: "GRAPH", hint: "Visual representation of data relationships." },
      right:  { answer: "WHEAT", hint: "Cereal grain used for making flour." }
    },
    {
      id: "L2-29",
      top:    { answer: "TRUCK", hint: "Motor vehicle designed for transporting cargo." },
      bottom: { answer: "MUSIC", hint: "Art form using organized sound and rhythm." },
      left:   { answer: "JUDGE", hint: "Official presiding over court proceedings." },
      right:  { answer: "PANIC", hint: "Sudden overwhelming fear or anxiety." }
    },
    {
      id: "L2-30",
      top:    { answer: "PROUD", hint: "Feeling satisfaction in accomplishment." },
      bottom: { answer: "SWORD", hint: "Weapon with long sharp blade." },
      left:   { answer: "THROW", hint: "Propel object through air with force." },
      right:  { answer: "CROWD", hint: "Large assembly of people together." }
    },
    {
      id: "L2-31",
      top:    { answer: "KNIFE", hint: "Cutting instrument with sharp blade." },
      bottom: { answer: "PHONE", hint: "Telecommunications device for conversation." },
      left:   { answer: "GRIEF", hint: "Deep sorrow from loss or tragedy." },
      right:  { answer: "SHORE", hint: "Land bordering body of water." }
    },
    {
      id: "L2-32",
      top:    { answer: "PLAZA", hint: "Open public square in urban area." },
      bottom: { answer: "ALBUM", hint: "Collection of recordings or photographs." },
      left:   { answer: "SMALL", hint: "Limited in size or amount." },
      right:  { answer: "THUMB", hint: "Opposable digit on human hand." }
    },
    {
      id: "L2-33",
      top:    { answer: "TIGER", hint: "Large striped Asian wild cat." },
      bottom: { answer: "RELAX", hint: "Release tension and become less rigid." },
      left:   { answer: "SUGAR", hint: "Sweet crystalline carbohydrate." },
      right:  { answer: "SOLAR", hint: "Pertaining to or derived from Sun." }
    },
    {
      id: "L2-34",
      top:    { answer: "CRISP", hint: "Firm and brittle texture or fresh." },
      bottom: { answer: "DRAMA", hint: "Theatrical performance or intense situation." },
      left:   { answer: "TRICK", hint: "Clever scheme to deceive or entertain." },
      right:  { answer: "COMMA", hint: "Punctuation mark indicating pause." }
    },
    {
      id: "L2-35",
      top:    { answer: "CLOUD", hint: "Visible mass of water vapor in atmosphere." },
      bottom: { answer: "CORAL", hint: "Marine organism forming reef structures." },
      left:   { answer: "EQUAL", hint: "Identical in value or amount." },
      right:  { answer: "LOCAL", hint: "Relating to nearby area or region." }
    },
    {
      id: "L2-36",
      top:    { answer: "TOPIC", hint: "Subject matter being discussed." },
      bottom: { answer: "ALBUM", hint: "Bound collection of items or music." },
      left:   { answer: "STEAM", hint: "Water vapor from boiling liquid." },
      right:  { answer: "CLIMB", hint: "Ascend steep surface using limbs." }
    },
    {
      id: "L2-37",
      top:    { answer: "BRICK", hint: "Rectangular block used in construction." },
      bottom: { answer: "STUCK", hint: "Unable to move or make progress." },
      left:   { answer: "THICK", hint: "Having considerable width or density." },
      right:  { answer: "PLUCK", hint: "Pull sharply or courage under pressure." }
    },
    {
      id: "L2-38",
      top:    { answer: "FLOUR", hint: "Finely milled grain powder for cooking." },
      bottom: { answer: "BEACH", hint: "Coastal area with sand or pebbles." },
      left:   { answer: "ABOUT", hint: "Concerning or approximately." },
      right:  { answer: "TEACH", hint: "Instruct or impart knowledge to students." }
    },
    {
      id: "L2-39",
      top:    { answer: "SPORT", hint: "Physical activity involving competition." },
      bottom: { answer: "CHART", hint: "Graphical representation of information." },
      left:   { answer: "ADOPT", hint: "Take responsibility for raising child." },
      right:  { answer: "HEART", hint: "Muscular organ pumping blood through body." }
    },
    {
      id: "L2-40",
      top:    { answer: "ALARM", hint: "Device warning of danger or time." },
      bottom: { answer: "LEMON", hint: "Tart yellow citrus fruit." },
      left:   { answer: "BEACH", hint: "Waterside recreational area with sand." },
      right:  { answer: "DEMON", hint: "Evil spirit or malevolent entity." }
    },
    {
      id: "L2-41",
      top:    { answer: "WHALE", hint: "Massive marine mammal breathing air." },
      bottom: { answer: "CHAIR", hint: "Furniture piece designed for sitting." },
      left:   { answer: "FRESH", hint: "Recently made or not stale." },
      right:  { answer: "THEIR", hint: "Possessive form belonging to them." }
    },
    {
      id: "L2-42",
      top:    { answer: "STUDY", hint: "Acquire knowledge through reading and practice." },
      bottom: { answer: "EMPTY", hint: "Containing nothing or vacant." },
      left:   { answer: "CANDY", hint: "Sweet confection made with sugar." },
      right:  { answer: "PARTY", hint: "Social gathering for celebration." }
    },
    {
      id: "L2-43",
      top:    { answer: "DOZEN", hint: "Group consisting of twelve items." },
      bottom: { answer: "GREEN", hint: "Color between blue and yellow." },
      left:   { answer: "GIVEN", hint: "Already specified or granted freely." },
      right:  { answer: "QUEEN", hint: "Female monarch ruling kingdom." }
    },
    {
      id: "L2-44",
      top:    { answer: "BLAME", hint: "Hold responsible for fault or wrongdoing." },
      bottom: { answer: "VALUE", hint: "Importance, worth, or numerical amount." },
      left:   { answer: "FLAME", hint: "Visible gaseous part of fire." },
      right:  { answer: "SALVE", hint: "Healing ointment applied to wounds." }
    },
    {
      id: "L2-45",
      top:    { answer: "FLASH", hint: "Brief intense burst of light." },
      bottom: { answer: "METAL", hint: "Solid material like iron or copper." },
      left:   { answer: "CLASH", hint: "Violent collision or disagreement." },
      right:  { answer: "PETAL", hint: "Colorful part of flower surrounding center." }
    },
    {
      id: "L2-46",
      top:    { answer: "CRIME", hint: "Act punishable by law." },
      bottom: { answer: "MAPLE", hint: "Tree producing sweet sap and distinctive leaves." },
      left:   { answer: "ARGUE", hint: "Exchange opposing views in disagreement." },
      right:  { answer: "APPLE", hint: "Round fruit typically red or green." }
    },
    {
      id: "L2-47",
      top:    { answer: "BLANK", hint: "Empty space without content or markings." },
      bottom: { answer: "BREAK", hint: "Cause to separate into pieces." },
      left:   { answer: "THANK", hint: "Express gratitude for kindness." },
      right:  { answer: "STEAK", hint: "Thick slice of beef for cooking." }
    },
    {
      id: "L2-48",
      top:    { answer: "SOLAR", hint: "Related to or powered by the Sun." },
      bottom: { answer: "HUMAN", hint: "Member of Homo sapiens species." },
      left:   { answer: "COLOR", hint: "Visual perception of different wavelengths." },
      right:  { answer: "WOMAN", hint: "Adult female human being." }
    },
    {
      id: "L2-49",
      top:    { answer: "WASTE", hint: "Use resources carelessly or refuse material." },
      bottom: { answer: "EXTRA", hint: "Additional amount beyond usual." },
      left:   { answer: "BEAST", hint: "Large or dangerous wild animal." },
      right:  { answer: "ULTRA", hint: "Extremely or going beyond normal limits." }
    },
    {
      id: "L2-50",
      top:    { answer: "FRUIT", hint: "Seed-bearing product of flowering plant." },
      bottom: { answer: "MATCH", hint: "Competition or things corresponding well." },
      left:   { answer: "ADMIT", hint: "Confess truth or allow entry." },
      right:  { answer: "WATCH", hint: "Observe carefully or timepiece for wrist." }
    },
    {
      id: "L2-51",
      top:    { answer: "SCALE", hint: "Device for measuring weight or size ratio." },
      bottom: { answer: "WRECK", hint: "Severely damaged remains of vehicle." },
      left:   { answer: "ANKLE", hint: "Joint connecting foot to lower leg." },
      right:  { answer: "CHECK", hint: "Verify accuracy or written order to bank." }
    },
    {
      id: "L2-52",
      top:    { answer: "PIXEL", hint: "Smallest element of digital image." },
      bottom: { answer: "LABEL", hint: "Tag providing identification information." },
      left:   { answer: "CIVIL", hint: "Courteous or relating to citizens." },
      right:  { answer: "REBEL", hint: "Person opposing established authority." }
    },
    {
      id: "L2-53",
      top:    { answer: "MEDAL", hint: "Metal disc awarded for achievement." },
      bottom: { answer: "LEGAL", hint: "Permitted by law or relating to law." },
      left:   { answer: "IDEAL", hint: "Perfect standard or most suitable." },
      right:  { answer: "REGAL", hint: "Magnificent or befitting royalty." }
    },
    {
      id: "L2-54",
      top:    { answer: "MOTOR", hint: "Machine converting energy into motion." },
      bottom: { answer: "HUMOR", hint: "Quality of being amusing or funny." },
      left:   { answer: "MINOR", hint: "Lesser in importance or under legal age." },
      right:  { answer: "TUMOR", hint: "Abnormal mass of tissue in body." }
    },
    {
      id: "L2-55",
      top:    { answer: "WHEAT", hint: "Cereal grain used for bread production." },
      bottom: { answer: "PEARL", hint: "Lustrous gem formed in oyster." },
      left:   { answer: "CHEAT", hint: "Act dishonestly for unfair advantage." },
      right:  { answer: "STEAL", hint: "Take property without permission." }
    },
    {
      id: "L2-56",
      top:    { answer: "MELON", hint: "Large sweet fruit with hard rind." },
      bottom: { answer: "CREAM", hint: "Thick fatty layer from milk." },
      left:   { answer: "BELOW", hint: "At lower position or level than." },
      right:  { answer: "DREAM", hint: "Images during sleep or cherished aspiration." }
    },
    {
      id: "L2-57",
      top:    { answer: "GLOBE", hint: "Spherical model of Earth or round object." },
      bottom: { answer: "SLIDE", hint: "Move smoothly along surface." },
      left:   { answer: "TRIBE", hint: "Social group sharing culture and ancestry." },
      right:  { answer: "GLIDE", hint: "Move with smooth continuous motion." }
    },
    {
      id: "L2-58",
      top:    { answer: "SPICE", hint: "Aromatic plant substance for flavoring food." },
      bottom: { answer: "WROTE", hint: "Past tense of composing text." },
      left:   { answer: "SPACE", hint: "Empty area or cosmic expanse." },
      right:  { answer: "QUOTE", hint: "Repeat exact words from source." }
    },
    {
      id: "L2-59",
      top:    { answer: "WRECK", hint: "Badly damaged structure or vehicle remains." },
      bottom: { answer: "PILOT", hint: "Person qualified to operate aircraft." },
      left:   { answer: "RIVAL", hint: "Competitor seeking same objective." },
      right:  { answer: "ORBIT", hint: "Curved path around celestial body." }
    },
    {
      id: "L2-60",
      top:    { answer: "SLATE", hint: "Fine-grained rock or blank writing surface." },
      bottom: { answer: "VITAL", hint: "Absolutely necessary or essential for life." },
      left:   { answer: "TOTAL", hint: "Complete amount or sum of parts." },
      right:  { answer: "METAL", hint: "Solid conductive element like gold or iron." }
    }
  ];

  // ========== LEVEL 3 PUZZLES (HARD) ==========
  const PUZZLES_L3 = [
    {
      id: "L3-1",
      top:    { answer: "ACID#", hint: "Sharp or sour chemical liquid that reacts strongly." },
      bottom: { answer: "#TUBE", hint: "Hollow cylinder that carries air or liquid." },
      left:   { answer: "#CATS", hint: "Small furry pets that purr." },
      right:  { answer: "#DABS", hint: "Light touches with a finger or brush." }
    },
    {
      id: "L3-2",
      top:    { answer: "ACID#", hint: "Sharp or sour chemical liquid that reacts strongly." },
      bottom: { answer: "#TOOL", hint: "Instrument used to fix or build things." },
      left:   { answer: "#CATS", hint: "Small furry pets that purr." },
      right:  { answer: "#DOOR", hint: "Movable barrier that opens and closes a room." }
    },
    {
      id: "L3-3",
      top:    { answer: "#CORN", hint: "Yellow grain that grows on tall stalks." },
      bottom: { answer: "#TOOL", hint: "Instrument used to fix or build things." },
      left:   { answer: "#CATS", hint: "Small furry pets that purr." },
      right:  { answer: "#ROOF", hint: "Top covering of a building." }
    },
    {
      id: "L3-4",
      top:    { answer: "#CARD", hint: "Small stiff paper piece used for games or messages." },
      bottom: { answer: "#TOOL", hint: "Instrument used to fix or build things." },
      left:   { answer: "#CATS", hint: "Small furry pets that purr." },
      right:  { answer: "#ROOF", hint: "Top covering of a building." }
    },
    {
      id: "L3-5",
      top:    { answer: "#CORN", hint: "Yellow grain that grows on tall stalks." },
      bottom: { answer: "#TOOL", hint: "Instrument used to fix or build things." },
      left:   { answer: "#CATS", hint: "Small furry pets that purr." },
      right:  { answer: "#ROOM", hint: "Part of a building separated by walls." }
    },
    {
      id: "L3-6",
      top:    { answer: "#CARD", hint: "Small stiff paper piece used for games or messages." },
      bottom: { answer: "#TOOL", hint: "Instrument used to fix or build things." },
      left:   { answer: "#CATS", hint: "Small furry pets that purr." },
      right:  { answer: "#ROOM", hint: "Part of a building separated by walls." }
    },
    {
      id: "L3-7",
      top:    { answer: "CAKE#", hint: "Sweet baked dessert, often with frosting." },
      bottom: { answer: "#SILK", hint: "Smooth, shiny cloth made from silkworms." },
      left:   { answer: "CATS#", hint: "Small furry pets that purr." },
      right:  { answer: "#EELS", hint: "Long, snake-like fish." }
    },
    {
      id: "L3-8",
      top:    { answer: "GATE#", hint: "Hinged opening in a fence or wall." },
      bottom: { answer: "#SILK", hint: "Smooth, shiny cloth made from silkworms." },
      left:   { answer: "CATS#", hint: "Small furry pets that purr." },
      right:  { answer: "#EELS", hint: "Long, snake-like fish." }
    },
    {
      id: "L3-9",
      top:    { answer: "GAME#", hint: "Structured play or contest with rules." },
      bottom: { answer: "#SILK", hint: "Smooth, shiny cloth made from silkworms." },
      left:   { answer: "CATS#", hint: "Small furry pets that purr." },
      right:  { answer: "#EELS", hint: "Long, snake-like fish." }
    },
    {
      id: "L3-10",
      top:    { answer: "FACE#", hint: "Front part of the head with eyes, nose, and mouth." },
      bottom: { answer: "#SILK", hint: "Smooth, shiny cloth made from silkworms." },
      left:   { answer: "CATS#", hint: "Small furry pets that purr." },
      right:  { answer: "#EELS", hint: "Long, snake-like fish." }
    },
    {
      id: "L3-11",
      top:    { answer: "TIMES", hint: "Repeated occasions or the √ó sign in math." },
      bottom: { answer: "IDEAS", hint: "Thoughts, plans, or mental concepts." },
      left:   { answer: "MINDS", hint: "Thinking parts of people; intellects." },
      right:  { answer: "METAL", hint: "Hard, shiny material like iron or steel." }
    },
    {
      id: "L3-12",
      top:    { answer: "MAPLE", hint: "Tree whose leaf is on the Canadian flag." },
      bottom: { answer: "STORM", hint: "Violent weather with wind and rain." },
      left:   { answer: "EARTH", hint: "The planet we live on." },
      right:  { answer: "ALARM", hint: "Device that warns you with a sound." }
    },
    {
      id: "L3-13",
      top:    { answer: "WORLD", hint: "The Earth and all life on it." },
      bottom: { answer: "RIVER", hint: "Large natural stream of water." },
      left:   { answer: "LOGIC", hint: "Clear, sensible way of thinking." },
      right:  { answer: "OLDER", hint: "More advanced in age." }
    },
    {
      id: "L3-14",
      top:    { answer: "GRAPE", hint: "Small round fruit used to make wine." },
      bottom: { answer: "SCENE", hint: "View, or part of a movie or play." },
      left:   { answer: "TRACK", hint: "Path for runners or for trains." },
      right:  { answer: "SPINE", hint: "Backbone down the center of your back." }
    },
    {
      id: "L3-15",
      top:    { answer: "FRUIT", hint: "Sweet edible plant product with seeds." },
      bottom: { answer: "BLEND", hint: "Mix together smoothly." },
      left:   { answer: "RUBLE", hint: "Russian currency unit." },
      right:  { answer: "TREND", hint: "General direction or pattern over time." }
    },
    {
      id: "L3-16",
      top:    { answer: "OCEAN", hint: "Vast body of salt water." },
      bottom: { answer: "PLANT", hint: "Living organism that grows in soil." },
      left:   { answer: "CLEAN", hint: "Free from dirt or marks." },
      right:  { answer: "CHANT", hint: "Rhythmic singing or shouting." }
    },
    {
      id: "L3-17",
      top:    { answer: "FLAME", hint: "Burning gas that gives off light and heat." },
      bottom: { answer: "SMART", hint: "Intelligent and quick-witted." },
      left:   { answer: "LEARN", hint: "Gain knowledge or skill through study." },
      right:  { answer: "MEATS", hint: "Animal flesh used as food." }
    },
    {
      id: "L3-18",
      top:    { answer: "HEART", hint: "Organ that pumps blood through the body." },
      bottom: { answer: "EXACT", hint: "Completely accurate and correct." },
      left:   { answer: "EXTRA", hint: "More than is needed or expected." },
      right:  { answer: "TRACT", hint: "Area of land or system of body organs." }
    },
    {
      id: "L3-19",
      top:    { answer: "SHINY", hint: "Reflecting light; glossy and bright." },
      bottom: { answer: "SWEEP", hint: "Clean an area with a brush or broom." },
      left:   { answer: "HINTS", hint: "Subtle clues or suggestions." },
      right:  { answer: "YEEPS", hint: "Exclamations of surprise or alarm." }
    },
    {
      id: "L3-20",
      top:    { answer: "GRAND", hint: "Large and impressive in size or appearance." },
      bottom: { answer: "SPEND", hint: "Pay money for goods or services." },
      left:   { answer: "GRIND", hint: "Crush into small particles or powder." },
      right:  { answer: "BLEND", hint: "Mix substances together smoothly." }
    },
    {
      id: "L3-21",
      top:    { answer: "#BOOT", hint: "Heavy shoe covering ankle or trunk of car." },
      bottom: { answer: "#WEEK", hint: "Period of seven days." },
      left:   { answer: "#COWS", hint: "Large farm animals that give milk." },
      right:  { answer: "#TOOK", hint: "Past tense of take." }
    },
    {
      id: "L3-22",
      top:    { answer: "ROAD#", hint: "Paved path for vehicles to travel on." },
      bottom: { answer: "#WEEK", hint: "Period of seven days." },
      left:   { answer: "#COWS", hint: "Large farm animals that give milk." },
      right:  { answer: "TOOK#", hint: "Past tense of take." }
    },
    {
      id: "L3-23",
      top:    { answer: "#GOLF", hint: "Sport played with clubs and a small ball." },
      bottom: { answer: "#WEEK", hint: "Period of seven days." },
      left:   { answer: "#BOWL", hint: "Round deep dish for food." },
      right:  { answer: "#FLEE", hint: "Run away quickly from danger." }
    },
    {
      id: "L3-24",
      top:    { answer: "GRAY#", hint: "Color between black and white." },
      bottom: { answer: "#WEEK", hint: "Period of seven days." },
      left:   { answer: "#DRAW", hint: "Make picture with pencil or pen." },
      right:  { answer: "#PEEK", hint: "Quick secret look." }
    },
    {
      id: "L3-25",
      top:    { answer: "#FISH", hint: "Aquatic animal with gills and fins." },
      bottom: { answer: "#PARK", hint: "Public green space or leave vehicle." },
      left:   { answer: "#WISH", hint: "Hope for something to happen." },
      right:  { answer: "#DARK", hint: "Without light; opposite of bright." }
    },
    {
      id: "L3-26",
      top:    { answer: "DISH#", hint: "Plate for serving food." },
      bottom: { answer: "PARK#", hint: "Public green space or leave vehicle." },
      left:   { answer: "WISH#", hint: "Hope for something to happen." },
      right:  { answer: "DARK#", hint: "Without light; opposite of bright." }
    },
    {
      id: "L3-27",
      top:    { answer: "#RICH", hint: "Having a lot of money or wealth." },
      bottom: { answer: "#PARK", hint: "Public green space or leave vehicle." },
      left:   { answer: "#WISH", hint: "Hope for something to happen." },
      right:  { answer: "#DARK", hint: "Without light; opposite of bright." }
    },
    {
      id: "L3-28",
      top:    { answer: "RICH#", hint: "Having a lot of money or wealth." },
      bottom: { answer: "MARK#", hint: "Visible sign or symbol." },
      left:   { answer: "WISH#", hint: "Hope for something to happen." },
      right:  { answer: "DARK#", hint: "Without light; opposite of bright." }
    },
    {
      id: "L3-29",
      top:    { answer: "CLICK", hint: "Short sharp sound or press mouse button." },
      bottom: { answer: "CROWN", hint: "Royal headpiece worn by monarch." },
      left:   { answer: "TRICK", hint: "Clever act to deceive or entertain." },
      right:  { answer: "ARROW", hint: "Pointed projectile shot from bow." }
    },
    {
      id: "L3-30",
      top:    { answer: "SHOCK", hint: "Sudden surprising event or electrical jolt." },
      bottom: { answer: "FIELD", hint: "Open area of land for crops or sports." },
      left:   { answer: "THICK", hint: "Having great width or density." },
      right:  { answer: "YIELD", hint: "Produce results or give way." }
    },
    {
      id: "L3-31",
      top:    { answer: "#JUMP", hint: "Spring off ground using legs." },
      bottom: { answer: "#MILK", hint: "White liquid from cows or other mammals." },
      left:   { answer: "#DUMP", hint: "Drop or throw away carelessly." },
      right:  { answer: "#SILK", hint: "Smooth shiny cloth from silkworms." }
    },
    {
      id: "L3-32",
      top:    { answer: "JUMP#", hint: "Spring off ground using legs." },
      bottom: { answer: "MILK#", hint: "White liquid from cows or other mammals." },
      left:   { answer: "DUMP#", hint: "Drop or throw away carelessly." },
      right:  { answer: "SILK#", hint: "Smooth shiny cloth from silkworms." }
    },
    {
      id: "L3-33",
      top:    { answer: "#BUMP", hint: "Hit against something accidentally." },
      bottom: { answer: "#BILK", hint: "Cheat someone out of money." },
      left:   { answer: "#DUMP", hint: "Drop or throw away carelessly." },
      right:  { answer: "#SILK", hint: "Smooth shiny cloth from silkworms." }
    },
    {
      id: "L3-34",
      top:    { answer: "LUNCH", hint: "Midday meal between breakfast and dinner." },
      bottom: { answer: "BONUS", hint: "Extra reward beyond normal payment." },
      left:   { answer: "DANCE", hint: "Move rhythmically to music." },
      right:  { answer: "PIANO", hint: "Large keyboard musical instrument." }
    },
    {
      id: "L3-35",
      top:    { answer: "CRISP", hint: "Firm and brittle in texture." },
      bottom: { answer: "DRAMA", hint: "Theatrical performance or intense situation." },
      left:   { answer: "TRICK", hint: "Clever deception or skillful act." },
      right:  { answer: "COMMA", hint: "Punctuation mark indicating pause." }
    },
    {
      id: "L3-36",
      top:    { answer: "#PLAY", hint: "Engage in activity for enjoyment." },
      bottom: { answer: "#RAIN", hint: "Water falling from clouds." },
      left:   { answer: "#SLAY", hint: "Kill violently or impress greatly." },
      right:  { answer: "#VAIN", hint: "Excessively proud of appearance." }
    },
    {
      id: "L3-37",
      top:    { answer: "PLAY#", hint: "Engage in activity for enjoyment." },
      bottom: { answer: "RAIN#", hint: "Water falling from clouds." },
      left:   { answer: "SLAY#", hint: "Kill violently or impress greatly." },
      right:  { answer: "VAIN#", hint: "Excessively proud of appearance." }
    },
    {
      id: "L3-38",
      top:    { answer: "#CLAY", hint: "Moldable earth used for pottery." },
      bottom: { answer: "#MAIN", hint: "Chief or most important part." },
      left:   { answer: "#SLAY", hint: "Kill violently or impress greatly." },
      right:  { answer: "#VAIN", hint: "Excessively proud of appearance." }
    },
    {
      id: "L3-39",
      top:    { answer: "PRIZE", hint: "Award given for winning competition." },
      bottom: { answer: "TRADE", hint: "Exchange goods or services." },
      left:   { answer: "TRIBE", hint: "Social group sharing culture." },
      right:  { answer: "SHADE", hint: "Area protected from sunlight." }
    },
    {
      id: "L3-40",
      top:    { answer: "SCALE", hint: "Device for weighing or size ratio." },
      bottom: { answer: "WRECK", hint: "Destroyed remains of vehicle or ship." },
      left:   { answer: "ANKLE", hint: "Joint connecting foot to leg." },
      right:  { answer: "CHECK", hint: "Examine or payment document." }
    },
    {
      id: "L3-41",
      top:    { answer: "#HIDE", hint: "Conceal from view or animal skin." },
      bottom: { answer: "#TIDE", hint: "Rising and falling of ocean water." },
      left:   { answer: "#SIDE", hint: "Edge or surface of something." },
      right:  { answer: "#WIDE", hint: "Having great width; broad." }
    },
    {
      id: "L3-42",
      top:    { answer: "HIDE#", hint: "Conceal from view or animal skin." },
      bottom: { answer: "TIDE#", hint: "Rising and falling of ocean water." },
      left:   { answer: "SIDE#", hint: "Edge or surface of something." },
      right:  { answer: "WIDE#", hint: "Having great width; broad." }
    },
    {
      id: "L3-43",
      top:    { answer: "#RIDE", hint: "Travel in vehicle or on animal." },
      bottom: { answer: "#TIDE", hint: "Rising and falling of ocean water." },
      left:   { answer: "#SIDE", hint: "Edge or surface of something." },
      right:  { answer: "#WIDE", hint: "Having great width; broad." }
    },
    {
      id: "L3-44",
      top:    { answer: "PIXEL", hint: "Smallest element of digital image." },
      bottom: { answer: "LABEL", hint: "Tag providing identification." },
      left:   { answer: "CIVIL", hint: "Courteous or relating to citizens." },
      right:  { answer: "REBEL", hint: "Person opposing authority." }
    },
    {
      id: "L3-45",
      top:    { answer: "MOTOR", hint: "Machine producing motion from energy." },
      bottom: { answer: "HUMOR", hint: "Quality of being amusing." },
      left:   { answer: "MINOR", hint: "Small in importance or under age." },
      right:  { answer: "TUMOR", hint: "Abnormal tissue growth." }
    },
    {
      id: "L3-46",
      top:    { answer: "#TEAM", hint: "Group working together toward goal." },
      bottom: { answer: "#BEAM", hint: "Ray of light or structural support." },
      left:   { answer: "#PEAS", hint: "Small round green vegetables." },
      right:  { answer: "#BEAR", hint: "Large mammal with thick fur." }
    },
    {
      id: "L3-47",
      top:    { answer: "TEAM#", hint: "Group working together toward goal." },
      bottom: { answer: "BEAM#", hint: "Ray of light or structural support." },
      left:   { answer: "PEAS#", hint: "Small round green vegetables." },
      right:  { answer: "BEAR#", hint: "Large mammal with thick fur." }
    },
    {
      id: "L3-48",
      top:    { answer: "#SEAM", hint: "Line where two pieces join." },
      bottom: { answer: "#BEAM", hint: "Ray of light or structural support." },
      left:   { answer: "#PEAS", hint: "Small round green vegetables." },
      right:  { answer: "#BEAR", hint: "Large mammal with thick fur." }
    },
    {
      id: "L3-49",
      top:    { answer: "GLOBE", hint: "Spherical model of Earth." },
      bottom: { answer: "SLIDE", hint: "Move smoothly along surface." },
      left:   { answer: "TRIBE", hint: "Social group sharing culture." },
      right:  { answer: "GLIDE", hint: "Move with smooth continuous motion." }
    },
    {
      id: "L3-50",
      top:    { answer: "SPICE", hint: "Aromatic plant substance for flavoring." },
      bottom: { answer: "WROTE", hint: "Past tense of write." },
      left:   { answer: "SPACE", hint: "Empty area or cosmic expanse." },
      right:  { answer: "QUOTE", hint: "Repeat exact words from source." }
    },
    {
      id: "L3-51",
      top:    { answer: "#LEND", hint: "Temporarily give something to someone." },
      bottom: { answer: "#BEND", hint: "Curve or cause to curve." },
      left:   { answer: "#TEND", hint: "Care for or be inclined toward." },
      right:  { answer: "#SEND", hint: "Cause to go or be delivered." }
    },
    {
      id: "L3-52",
      top:    { answer: "LEND#", hint: "Temporarily give something to someone." },
      bottom: { answer: "BEND#", hint: "Curve or cause to curve." },
      left:   { answer: "TEND#", hint: "Care for or be inclined toward." },
      right:  { answer: "SEND#", hint: "Cause to go or be delivered." }
    },
    {
      id: "L3-53",
      top:    { answer: "#MEND", hint: "Repair something that is broken." },
      bottom: { answer: "#BEND", hint: "Curve or cause to curve." },
      left:   { answer: "#TEND", hint: "Care for or be inclined toward." },
      right:  { answer: "#SEND", hint: "Cause to go or be delivered." }
    },
    {
      id: "L3-54",
      top:    { answer: "CHAIR", hint: "Furniture for sitting with back support." },
      bottom: { answer: "SHAPE", hint: "External form or contour." },
      left:   { answer: "CHEAP", hint: "Inexpensive or of poor quality." },
      right:  { answer: "GRAPE", hint: "Small berry growing on vines." }
    },
    {
      id: "L3-55",
      top:    { answer: "BRAKE", hint: "Device to slow or stop vehicle." },
      bottom: { answer: "THANK", hint: "Express gratitude to someone." },
      left:   { answer: "TRACK", hint: "Path or follow trail of something." },
      right:  { answer: "BLANK", hint: "Empty space without marks." }
    },
    {
      id: "L3-56",
      top:    { answer: "#BAKE", hint: "Cook food in oven using dry heat." },
      bottom: { answer: "#MAKE", hint: "Create or construct something." },
      left:   { answer: "#TAKE", hint: "Grab hold of or carry away." },
      right:  { answer: "#WAKE", hint: "Stop sleeping or become alert." }
    },
    {
      id: "L3-57",
      top:    { answer: "BAKE#", hint: "Cook food in oven using dry heat." },
      bottom: { answer: "MAKE#", hint: "Create or construct something." },
      left:   { answer: "TAKE#", hint: "Grab hold of or carry away." },
      right:  { answer: "WAKE#", hint: "Stop sleeping or become alert." }
    },
    {
      id: "L3-58",
      top:    { answer: "#FAKE", hint: "Not genuine or authentic; counterfeit." },
      bottom: { answer: "#MAKE", hint: "Create or construct something." },
      left:   { answer: "#TAKE", hint: "Grab hold of or carry away." },
      right:  { answer: "#WAKE", hint: "Stop sleeping or become alert." }
    },
    {
      id: "L3-59",
      top:    { answer: "FRAME", hint: "Structure supporting or surrounding." },
      bottom: { answer: "PEACE", hint: "Freedom from war or tranquility." },
      left:   { answer: "DRAMA", hint: "Theater genre or exciting situation." },
      right:  { answer: "PLACE", hint: "Particular location or position." }
    },
    {
      id: "L3-60",
      top:    { answer: "PRINT", hint: "Produce text on paper or visible mark." },
      bottom: { answer: "TRAIL", hint: "Path through wilderness or evidence." },
      left:   { answer: "BRAIN", hint: "Organ controlling thought and body." },
      right:  { answer: "EMAIL", hint: "Digital message sent via internet." }
    }
  ];

  // ========== FUNCTIONS ==========

  function setSeed(s) {
    seed = s;
    seededRandom = mulberry32(seed);

    // Shuffle puzzle arrays for daily consistency
    shuffle(PUZZLES_L1);
    shuffle(PUZZLES_L2);
    shuffle(PUZZLES_L3);

    console.log('‚úÖ Hashtag Words: Seed set and puzzles shuffled');
  }

  function setLevel(lvl) {
    currentLevel = lvl;
  }

  function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(seededRandom() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
  }

  function selectLevel(level) {
    currentLevel = level;
    currentPuzzleIndex = 0;

    document.getElementById("levelSelection").style.display = "none";
    document.getElementById("gameScreen").style.display = "block";

    levelNum.textContent = level;

    if (level === 1) {
      hintsLeft = 5;
      timeLeft = 60;
      bottomText.textContent = "Lots of letters shown, blanks randomized every puzzle.";
    } else if (level === 2) {
      hintsLeft = 4;
      timeLeft = 60;
      bottomText.textContent = "Fewer hints, more challenge!";
    } else if (level === 3) {
      hintsLeft = 3;
      timeLeft = 45;
      bottomText.textContent = "4-5 letter mix, hardest level!";
    }

    hintsEl.textContent = hintsLeft;
    timerEl.textContent = timeLeft;

    loadPuzzle(0);

    // Use requestAnimationFrame to ensure layout is complete before building board
    requestAnimationFrame(() => {
      resetGame();
    });
  }

  function loadPuzzle(idx) {
    currentPuzzleIndex = idx;

    let puzzleList;
    if (currentLevel === 1) {
      puzzleList = PUZZLES_L1;
    } else if (currentLevel === 2) {
      puzzleList = PUZZLES_L2;
    } else {
      puzzleList = PUZZLES_L3;
    }

    currentPuzzle = puzzleList[idx];
    const p = currentPuzzle;

    const t = p.top.answer.toUpperCase();
    const b = p.bottom.answer.toUpperCase();
    const l = p.left.answer.toUpperCase();
    const r = p.right.answer.toUpperCase();

    if (t.length !== 5 || b.length !== 5 || l.length !== 5 || r.length !== 5) {
      console.error("All words must be 5 letters long.", p);
    }

    words = [
      {
        id: "top", orientation: "h",
        answer: t, hint: p.top.hint,
        path: [{r:1,c:0},{r:1,c:1},{r:1,c:2},{r:1,c:3},{r:1,c:4}]
      },
      {
        id: "bottom", orientation: "h",
        answer: b, hint: p.bottom.hint,
        path: [{r:3,c:0},{r:3,c:1},{r:3,c:2},{r:3,c:3},{r:3,c:4}]
      },
      {
        id: "left", orientation: "v",
        answer: l, hint: p.left.hint,
        path: [{r:0,c:1},{r:1,c:1},{r:2,c:1},{r:3,c:1},{r:4,c:1}]
      },
      {
        id: "right", orientation: "v",
        answer: r, hint: p.right.hint,
        path: [{r:0,c:3},{r:1,c:3},{r:2,c:3},{r:3,c:3},{r:4,c:3}]
      }
    ];

    puzzleLabel.textContent = (idx + 1) + " / " + puzzleList.length;
  }

  function buildBars() {
    hashtagArea.querySelectorAll(".bar").forEach(b => b.remove());

    [1,3].forEach(row => {
      const bar = document.createElement("div");
      bar.className = "bar";
      const centerY = BASE_Y + row*STEP + CELL_SIZE/2;
      bar.style.top = (centerY - HBAR_HEIGHT/2) + "px";
      bar.style.left = (BASE_X - 25) + "px";
      bar.style.width = (STEP*4 + CELL_SIZE + 50) + "px";
      bar.style.height = HBAR_HEIGHT + "px";
      hashtagArea.appendChild(bar);
    });

    [1,3].forEach(col => {
      const bar = document.createElement("div");
      bar.className = "bar";
      const centerX = BASE_X + col*STEP + CELL_SIZE/2;
      bar.style.left = (centerX - VBAR_WIDTH/2) + "px";
      bar.style.top = (BASE_Y - 25) + "px";
      bar.style.width = VBAR_WIDTH + "px";
      bar.style.height = (STEP*4 + CELL_SIZE + 50) + "px";
      hashtagArea.appendChild(bar);
    });
  }

  function buildCells() {
    hashtagArea.querySelectorAll(".letter").forEach(el => el.remove());
    cells = [];
    userLetters = [];

    // Reset seeded random to ensure same puzzle configuration every time
    if (seed !== null) {
      seededRandom = mulberry32(seed);
    }

    const cellMap = {};
    const wordCells = { top:[], bottom:[], left:[], right:[] };

    // Create cell map
    words.forEach(word => {
      const letters = word.answer.toUpperCase().split("");
      word.path.forEach((pos, idx) => {
        const key = pos.r + "_" + pos.c;
        if (!cellMap[key]) {
          cellMap[key] = { r:pos.r, c:pos.c, solution:letters[idx], fixed:false, wordRefs:[] };
        }
        cellMap[key].wordRefs.push({ wordId:word.id, index:idx });
        wordCells[word.id].push({ key, index:idx });
      });
    });

    // Random fixed cells
    let MIN_FIXED, MAX_FIXED;
    if (currentLevel === 1) {
      MIN_FIXED = 3;
      MAX_FIXED = 4;
    } else if (currentLevel === 2) {
      MIN_FIXED = 2;
      MAX_FIXED = 3;
    } else {
      MIN_FIXED = 1;
      MAX_FIXED = 2;
    }

    words.forEach(word => {
      const list = wordCells[word.id];
      const len = list.length;
      if (!len) return;

      let maxFixForThis = Math.min(MAX_FIXED, len - 1);
      let minFixForThis = Math.min(MIN_FIXED, len);
      if (maxFixForThis < minFixForThis) maxFixForThis = minFixForThis;

      const target = Math.floor(seededRandom() * (maxFixForThis - minFixForThis + 1)) + minFixForThis;

      const indices = shuffle([...Array(len).keys()]).slice(0, target);
      indices.forEach(i => {
        const key = list[i].key;
        const cell = cellMap[key];
        if (cell.solution !== '#') {
          cell.fixed = true;
        }
      });
    });

    // Build DOM
    let index = 0;
    for (const key in cellMap) {
      const data = cellMap[key];
      const el = document.createElement("div");
      el.className = "letter";

      let left = BASE_X + data.c * STEP;
      let top  = BASE_Y + data.r * STEP;

      if (data.r === 1) left += 8;
      if (data.r === 3) left -= 8;

      if (data.c === 1 || data.c === 3) {
        if (data.r === 0) {
          left += 26;
        } else if (data.r === 4) {
          left -= 26;
        }
      }

      el.style.left = left + "px";
      el.style.top  = top + "px";

      const span = document.createElement("span");
      span.className = "letter-inner";

      if (data.solution === '#') {
        el.classList.add("filler");
        span.textContent = "";
      } else if (data.fixed) {
        el.classList.add("fixed");
        span.textContent = data.solution;
      } else {
        el.classList.add("empty");
        span.textContent = "";
        const currentIndex = index;
        el.addEventListener("click", () => selectCell(currentIndex));
      }

      el.appendChild(span);

      hashtagArea.appendChild(el);
      data.el = el;
      data.span = span;
      cells.push(data);
      userLetters.push((data.solution === '#' || data.fixed) ? data.solution : "");
      index++;
    }
  }

  function clearSelection() {
    cells.forEach(c => c.el.classList.remove("selected"));
  }

  function selectCell(idx) {
    if (solved) return;
    const cell = cells[idx];
    if (cell.fixed || cell.solution === '#') return;

    clearSelection();
    cell.el.classList.remove("wrong","correct");
    cell.el.classList.add("selected");
    selectedIndex = idx;
  }

  function positionHintButtons() {
    const btnMap = { top:infoTop, bottom:infoBottom, left:infoLeft, right:infoRight };

    words.forEach(word => {
      const btn = btnMap[word.id];
      if (!btn) return;

      if (word.orientation === "h") {
        let maxC = -1;
        let row = word.path[0].r;
        word.path.forEach(p => { if (p.c > maxC) maxC = p.c; });
        const centerY = BASE_Y + row*STEP + CELL_SIZE/2;
        const endX = BASE_X + maxC*STEP + CELL_SIZE;
        btn.style.left = (endX + 34) + "px";
        btn.style.top  = (centerY - 11) + "px";
      } else {
        let maxR = -1;
        let col = word.path[0].c;
        word.path.forEach(p => { if (p.r > maxR) maxR = p.r; });
        const centerX = BASE_X + col*STEP + CELL_SIZE/2;
        const endY = BASE_Y + maxR*STEP + CELL_SIZE;
        btn.style.left = (centerX - 11) + "px";
        btn.style.top  = (endY + 10) + "px";
      }
    });
  }

  function buildKeyboard() {
    keyboardEl.innerHTML = "";
    "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").forEach(ch => {
      const btn = document.createElement("button");
      btn.className = "key";
      btn.textContent = ch;
      btn.addEventListener("click", () => pressLetter(ch));
      keyboardEl.appendChild(btn);
    });
    const back = document.createElement("button");
    back.className = "key";
    back.textContent = "‚å´";
    back.addEventListener("click", backspace);
    keyboardEl.appendChild(back);
  }

  function pressLetter(ch) {
    if (selectedIndex === null || solved) return;
    const cell = cells[selectedIndex];
    if (cell.fixed || cell.solution === '#') return;

    cell.span.textContent = ch;
    cell.el.classList.remove("empty");
    userLetters[selectedIndex] = ch;

    clearSelection();
    selectedIndex = null;

    checkProgress();
  }

  function backspace() {
    if (selectedIndex === null || solved) return;
    const cell = cells[selectedIndex];
    if (cell.fixed || cell.solution === '#') return;

    cell.span.textContent = "";
    cell.el.classList.add("empty");
    cell.el.classList.remove("wrong","correct");
    userLetters[selectedIndex] = "";
    checkProgress();
  }

  function checkProgress() {
    let totalNonFixed = 0;
    let correctNonFixed = 0;
    let correctAll = 0;

    cells.forEach((cell, i) => {
      if (cell.fixed || cell.solution === '#') {
        correctAll++;
        return;
      }
      totalNonFixed++;
      const el = cell.el;
      const val = (userLetters[i] || "").toUpperCase();
      el.classList.remove("wrong","correct");
      if (!val) return;

      if (val === cell.solution.toUpperCase()) {
        correctNonFixed++;
        correctAll++;
        el.classList.add("correct");
      } else {
        el.classList.add("wrong");
      }
    });

    const ratio = totalNonFixed ? (correctNonFixed / totalNonFixed) : 0;
    updateHeat(ratio);

    const totalCells = cells.length;
    if (correctAll === totalCells) {
      solved = true;
      clearInterval(timer);
      heatEl.textContent = "DONE";
      heatEl.className = "";
      heatEl.classList.add("heat-max");
      statusEl.textContent = "‚úÖ You solved the hashtag!";
      statusEl.className = "success";

      // Send completion message to Swift
      if (window.webkit && window.webkit.messageHandlers && window.webkit.messageHandlers.gameComplete) {
        window.webkit.messageHandlers.gameComplete.postMessage({
          won: true,
          timeLeft: timeLeft
        });
      }
    } else {
      statusEl.textContent = "";
      statusEl.className = "";
    }
  }

  function updateHeat(ratio) {
    heatEl.className = "";
    if (ratio < 0.25) {
      heatEl.classList.add("heat-cold");
      heatEl.textContent = "COLD";
    } else if (ratio < 0.5) {
      heatEl.classList.add("heat-warm");
      heatEl.textContent = "WARM";
    } else if (ratio < 0.9) {
      heatEl.classList.add("heat-hot");
      heatEl.textContent = "HOT";
    } else {
      heatEl.classList.add("heat-max");
      heatEl.textContent = "ALMOST";
    }
  }

  function useHint(word) {
    if (solved) return;
    if (hintsLeft <= 0) {
      hintTextEl.textContent = "No hints left!";
      return;
    }
    hintsLeft--;
    hintsEl.textContent = hintsLeft;
    hintTextEl.textContent = "Hint (" + word.id.toUpperCase() + "): " + word.hint;

    // Update hint button appearance when hints run out
    if (hintsLeft <= 0) {
      infoTop.classList.add("disabled");
      infoBottom.classList.add("disabled");
      infoLeft.classList.add("disabled");
      infoRight.classList.add("disabled");
    }
  }

  function startTimer() {
    if (timer) clearInterval(timer);

    if (currentLevel === 3) {
      timeLeft = 45;
    } else {
      timeLeft = 60;
    }

    timerEl.textContent = timeLeft;
    timer = setInterval(() => {
      timeLeft--;
      timerEl.textContent = timeLeft;
      if (timeLeft <= 0) {
        clearInterval(timer);
        if (!solved) {
          statusEl.textContent = "‚è∞ Time's up!";
          statusEl.className = "fail";
        }
      }
    }, 1000);
  }

  function resetGame() {
    solved = false;

    if (currentLevel === 1) {
      hintsLeft = 5;
    } else if (currentLevel === 2) {
      hintsLeft = 4;
    } else {
      hintsLeft = 3;
    }

    hintsEl.textContent = hintsLeft;
    hintTextEl.textContent = "";
    statusEl.textContent = "";
    statusEl.className = "";
    selectedIndex = null;

    // Reset hint button appearance
    infoTop.classList.remove("disabled");
    infoBottom.classList.remove("disabled");
    infoLeft.classList.remove("disabled");
    infoRight.classList.remove("disabled");

    buildBars();
    buildCells();
    positionHintButtons();
    updateHeat(0);
    startTimer();
  }

  // ========== EVENT LISTENERS ==========

  infoTop.addEventListener("click",    () => useHint(words[0]));
  infoBottom.addEventListener("click", () => useHint(words[1]));
  infoLeft.addEventListener("click",   () => useHint(words[2]));
  infoRight.addEventListener("click",  () => useHint(words[3]));

  resetBtn.addEventListener("click", () => {
    loadPuzzle(currentPuzzleIndex);
    resetGame();
  });

  nextBtn.addEventListener("click", () => {
    let puzzleList;
    if (currentLevel === 1) {
      puzzleList = PUZZLES_L1;
    } else if (currentLevel === 2) {
      puzzleList = PUZZLES_L2;
    } else {
      puzzleList = PUZZLES_L3;
    }

    currentPuzzleIndex = (currentPuzzleIndex + 1) % puzzleList.length;
    loadPuzzle(currentPuzzleIndex);
    resetGame();
  });

  backBtn.addEventListener("click", () => {
    if (timer) clearInterval(timer);
    document.getElementById("gameScreen").style.display = "none";
    document.getElementById("levelSelection").style.display = "block";
  });

  // ========== INITIALIZATION ==========

  buildKeyboard();

  // Show splash for 3 seconds, then show game screen (level will be set by Swift)
  setTimeout(() => {
    document.getElementById("splashScreen").style.display = "none";
    // Level selection is hidden - Swift will call selectLevel() directly
    // If no level is set after 1 second, default to level 1 for testing
    setTimeout(() => {
      if (currentLevel === 0) {
        selectLevel(1);
      }
    }, 1000);
  }, 3000);

  // Expose functions for Swift to call
  window.setSeed = setSeed;
  window.setLevel = setLevel;
  window.selectLevel = selectLevel;
  window.loadPuzzle = loadPuzzle;
  window.resetGame = resetGame;
</script>

</body>
</html>
